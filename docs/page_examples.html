<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ED-247 LIBRARY: Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ED-247 LIBRARY
   &#160;<span id="projectnumber">1.1.3</span>
   </div>
   <div id="projectbrief">ED247 standard implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_examples.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#example_1">Example 1: Configuration walk through</a></li>
<li class="level1"><a href="#example_2">Example 2: Exchange stream samples (wait frame)</a></li>
<li class="level1"><a href="#example_3">Example 3: Exchange stream samples (wait during)</a></li>
<li class="level1"><a href="#example_4">Example 4: Exchange stream samples (event)</a></li>
<li class="level1"><a href="#example_5">Example 5: Exchange signal samples (wait frame)</a></li>
</ul>
</div>
<div class="textblock"><p>This page contains several examples of use of the library API.</p>
<h1><a class="anchor" id="example_1"></a>
Example 1: Configuration walk through</h1>
<p><b>ecic_walk_configuration.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;VirtualComponent&quot;</span> <span class="keyword">Comment</span>=<span class="stringliteral">&quot;Comment&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span> <span class="keyword">Comment</span>=<span class="stringliteral">&quot;Comment&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Header</span> <span class="keyword">TransportTimestamp</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                <span class="comment">&lt;!-- A429 --&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                &lt;<span class="keywordtype">A429_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;A429Stream0&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span> <span class="keyword">Comment</span>=<span class="stringliteral">&quot;Comment&quot;</span> <span class="keyword">ICD</span>=<span class="stringliteral">&quot;File.xml:BUS45&quot;</span>&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                &lt;/<span class="keywordtype">A429_Stream</span>&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                &lt;<span class="keywordtype">A429_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;A429Stream1&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span> <span class="keyword">Comment</span>=<span class="stringliteral">&quot;Comment&quot;</span> <span class="keyword">ICD</span>=<span class="stringliteral">&quot;File.xml:BUS45&quot;</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                &lt;/<span class="keywordtype">A429_Stream</span>&gt;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                <span class="comment">&lt;!-- DIS --&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                &lt;<span class="keywordtype">DIS_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;2&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream0&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span> <span class="keyword">SampleMaxSizeBytes</span>=<span class="stringliteral">&quot;2&quot;</span> <span class="keyword">SampleMaxNumber</span>=<span class="stringliteral">&quot;10&quot;</span>&gt;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                    &lt;<span class="keywordtype">Signals</span> <span class="keyword">SamplingPeriodUs</span>=<span class="stringliteral">&quot;10000&quot;</span>&gt;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                        &lt;<span class="keywordtype">Signal</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Signal00&quot;</span> <span class="keyword">ByteOffset</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                        &lt;<span class="keywordtype">Signal</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Signal01&quot;</span> <span class="keyword">ByteOffset</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                    &lt;/<span class="keywordtype">Signals</span>&gt;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                &lt;/<span class="keywordtype">DIS_Stream</span>&gt;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                &lt;<span class="keywordtype">DIS_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;3&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream1&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span> <span class="keyword">SampleMaxSizeBytes</span>=<span class="stringliteral">&quot;2&quot;</span> <span class="keyword">SampleMaxNumber</span>=<span class="stringliteral">&quot;10&quot;</span>&gt;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                    &lt;<span class="keywordtype">Signals</span> <span class="keyword">SamplingPeriodUs</span>=<span class="stringliteral">&quot;10000&quot;</span>&gt;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                        &lt;<span class="keywordtype">Signal</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Signal10&quot;</span> <span class="keyword">ByteOffset</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                        &lt;<span class="keywordtype">Signal</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Signal11&quot;</span> <span class="keyword">ByteOffset</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                    &lt;/<span class="keywordtype">Signals</span>&gt;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                &lt;/<span class="keywordtype">DIS_Stream</span>&gt;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>walk_configuration_main.c</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;ed247.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_walk_configuration.xml&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line">ed247_status_t dump_component(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context);</div><div class="line">ed247_status_t dump_channel(<a class="code" href="structed247__internal__channel__t.html">ed247_channel_t</a> channel);</div><div class="line">ed247_status_t dump_stream(<a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line">ed247_status_t dump_signal(<a class="code" href="structed247__internal__signal__t.html">ed247_signal_t</a> signal);</div><div class="line"></div><div class="line"><span class="comment">// The prupose of this example is to show how to walk through the configuration tree of elements only.</span></div><div class="line"><span class="comment">// This example do not contain data exchange loops.</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__channel__list__t.html">ed247_channel_list_t</a>    channels;</div><div class="line">    <a class="code" href="structed247__internal__channel__t.html">ed247_channel_t</a>         channel;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a>          stream;</div><div class="line">    <span class="keyword">const</span> <a class="code" href="structed247__stream__info__t.html">ed247_stream_info_t</a> *stream_info;</div><div class="line">    <a class="code" href="structed247__internal__signal__list__t.html">ed247_signal_list_t</a>     signals;</div><div class="line">    <a class="code" href="structed247__internal__signal__t.html">ed247_signal_t</a>          signal;</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout,<span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>,<a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout,<span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>,<a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Component</span></div><div class="line">    <span class="keywordflow">if</span>(dump_component(context)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Channels</span></div><div class="line">    status = <a class="code" href="group__channel.html#ga49100975512ba6b64fbbb1f4edb16bc1">ed247_find_channels</a>(context,<span class="stringliteral">&quot;.*&quot;</span>,&amp;channels);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span>(<a class="code" href="group__channel.html#gac144622372ae2ffa5ef38b752c2c1ea5">ed247_channel_list_next</a>(channels,&amp;channel) == ED247_STATUS_SUCCESS &amp;&amp; channel != NULL){</div><div class="line"></div><div class="line">        <span class="comment">// Channel</span></div><div class="line">        <span class="keywordflow">if</span>(dump_channel(channel)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">        <span class="comment">// Streams</span></div><div class="line">        status = <a class="code" href="group__stream.html#gaf00fb438a3b8c97feb838610a1ffc7dc">ed247_find_channel_streams</a>(channel,<span class="stringliteral">&quot;.*&quot;</span>,&amp;streams);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span>(<a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams,&amp;stream) == ED247_STATUS_SUCCESS &amp;&amp; stream != NULL){</div><div class="line"></div><div class="line">            <span class="comment">// Stream</span></div><div class="line">            <span class="keywordflow">if</span>(dump_stream(stream)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">            <a class="code" href="group__stream.html#ga41aa62f9c26073afc6f8a7348664f6b7">ed247_stream_get_info</a>(stream,&amp;stream_info);</div><div class="line"></div><div class="line">            <span class="keywordflow">switch</span>(stream_info-&gt;type){</div><div class="line">                <span class="keywordflow">case</span> ED247_STREAM_TYPE_DISCRETE:</div><div class="line">                <span class="keywordflow">case</span> ED247_STREAM_TYPE_ANALOG:</div><div class="line">                <span class="keywordflow">case</span> ED247_STREAM_TYPE_NAD:</div><div class="line">                <span class="keywordflow">case</span> ED247_STREAM_TYPE_VNAD:</div><div class="line"></div><div class="line">                    <span class="comment">// Signals</span></div><div class="line">                    status = <a class="code" href="group__signal.html#ga55d1f5c8b1bd10b66f72e72549a3f1cb">ed247_find_stream_signals</a>(stream,<span class="stringliteral">&quot;.*&quot;</span>,&amp;signals);</div><div class="line">                    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">                    <span class="keywordflow">while</span>(<a class="code" href="group__signal.html#gaf815bc3fe26275404b9988bde67faf59">ed247_signal_list_next</a>(signals,&amp;signal) == ED247_STATUS_SUCCESS &amp;&amp; signal != NULL){</div><div class="line"></div><div class="line">                        <span class="comment">// Signal</span></div><div class="line">                        <span class="keywordflow">if</span>(dump_signal(signal)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">                    }</div><div class="line"></div><div class="line">                    status = <a class="code" href="group__signal.html#ga3249893a97ef7ea717d8d4b12df2249c">ed247_signal_list_free</a>(signals);</div><div class="line">                    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">                <span class="keywordflow">default</span>:</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">        }</div><div class="line"></div><div class="line">        status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">        </div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    status = <a class="code" href="group__channel.html#gaaed6b1b9cc42eeef890bf600a0124f37">ed247_channel_list_free</a>(channels);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t dump_component(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context)</div><div class="line">{</div><div class="line">    ed247_status_t                  status;</div><div class="line">    <span class="keyword">const</span> <a class="code" href="structed247__component__info__s.html">ed247_component_info_t</a>    *info;</div><div class="line">    </div><div class="line">    status = <a class="code" href="group__component.html#ga5ebee12e014ee46533423085ca6857e6">ed247_component_get_info</a>(context,&amp;info);</div><div class="line">    <span class="keywordflow">if</span>(status) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    fprintf(stdout,<span class="stringliteral">&quot;# ED247 Component\n\</span></div><div class="line"><span class="stringliteral">Name: %s\n\</span></div><div class="line"><span class="stringliteral">Type: %s\n\</span></div><div class="line"><span class="stringliteral">Idenfitier: %&quot;</span>PRIu16<span class="stringliteral">&quot;\n\</span></div><div class="line"><span class="stringliteral">Standard: %s\n\</span></div><div class="line"><span class="stringliteral">Revision: %s\n&quot;</span>,</div><div class="line">        info-&gt;name,</div><div class="line">        <a class="code" href="group__common.html#gadfa22b5fe771535e20609ea96ed42dc9">ed247_component_type_string</a>(info-&gt;component_type),</div><div class="line">        info-&gt;identifier,</div><div class="line">        <a class="code" href="group__common.html#ga509d237f65018a7462a98481616d673c">ed247_standard_string</a>(info-&gt;standard_revision),</div><div class="line">        info-&gt;comment);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> status;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t dump_channel(<a class="code" href="structed247__internal__channel__t.html">ed247_channel_t</a> channel)</div><div class="line">{</div><div class="line">    ed247_status_t              status;</div><div class="line">    <span class="keyword">const</span> <a class="code" href="structed247__channel__info__s.html">ed247_channel_info_t</a>  *info;</div><div class="line"></div><div class="line">    status = <a class="code" href="group__channel.html#ga41ec9b9f7147aa90b57ded7d09c37442">ed247_channel_get_info</a>(channel,&amp;info);</div><div class="line">    <span class="keywordflow">if</span>(status) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    fprintf(stdout,<span class="stringliteral">&quot;## ED247 Channel\n\</span></div><div class="line"><span class="stringliteral">Name: %s\n\</span></div><div class="line"><span class="stringliteral">Comment: %s\n\</span></div><div class="line"><span class="stringliteral">FrameFormat/StandardRevision: %s\n&quot;</span>,</div><div class="line">        info-&gt;name,</div><div class="line">        info-&gt;comment,</div><div class="line">        <a class="code" href="group__common.html#ga509d237f65018a7462a98481616d673c">ed247_standard_string</a>(info-&gt;frame_format.standard_revision));</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> status;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t dump_stream(<a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t              status;</div><div class="line">    <span class="keyword">const</span> <a class="code" href="structed247__stream__info__t.html">ed247_stream_info_t</a>   *info;</div><div class="line"></div><div class="line">    status = <a class="code" href="group__stream.html#ga41aa62f9c26073afc6f8a7348664f6b7">ed247_stream_get_info</a>(stream,&amp;info);</div><div class="line">    <span class="keywordflow">if</span>(status) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    fprintf(stdout,<span class="stringliteral">&quot;### ED247 Stream\n\</span></div><div class="line"><span class="stringliteral">Name: %s\n\</span></div><div class="line"><span class="stringliteral">UID: %&quot;</span>PRIu16<span class="stringliteral">&quot;\n\</span></div><div class="line"><span class="stringliteral">ICD: %s\n\</span></div><div class="line"><span class="stringliteral">Comment: %s\n&quot;</span>,</div><div class="line">        info-&gt;name,</div><div class="line">        info-&gt;uid,</div><div class="line">        info-&gt;icd,</div><div class="line">        info-&gt;comment);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ED247_STATUS_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t dump_signal(<a class="code" href="structed247__internal__signal__t.html">ed247_signal_t</a> signal)</div><div class="line">{</div><div class="line">    ed247_status_t              status;</div><div class="line">    <span class="keyword">const</span> <a class="code" href="structed247__signal__info__s.html">ed247_signal_info_t</a>   *info;</div><div class="line"></div><div class="line">    status = <a class="code" href="group__signal.html#gab3040745bd2caaaa643c37eafc3bb1da">ed247_signal_get_info</a>(signal,&amp;info);</div><div class="line">    <span class="keywordflow">if</span>(status) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(info-&gt;type == ED247_SIGNAL_TYPE_DISCRETE){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;#### ED247 DISCRETE Signal\n\</span></div><div class="line"><span class="stringliteral">Name: %s\n\</span></div><div class="line"><span class="stringliteral">ICD: %s\n\</span></div><div class="line"><span class="stringliteral">ByteOffset: %u\n\</span></div><div class="line"><span class="stringliteral">Comment: %s\n&quot;</span>,</div><div class="line">        info-&gt;name,</div><div class="line">        info-&gt;icd,</div><div class="line">        info-&gt;info.dis.byte_offset,</div><div class="line">        info-&gt;comment);</div><div class="line">    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(info-&gt;type == ED247_SIGNAL_TYPE_ANALOG){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;#### ED247 ANALOG Signal\n\</span></div><div class="line"><span class="stringliteral">Name: %s\n\</span></div><div class="line"><span class="stringliteral">ICD: %s\n\</span></div><div class="line"><span class="stringliteral">ElectricalUnit: %s\n\</span></div><div class="line"><span class="stringliteral">ByteOffset: %u\n\</span></div><div class="line"><span class="stringliteral">Comment: %s\n&quot;</span>,</div><div class="line">        info-&gt;name,</div><div class="line">        info-&gt;icd,</div><div class="line">        info-&gt;info.ana.electrical_unit,</div><div class="line">        info-&gt;info.ana.byte_offset,</div><div class="line">        info-&gt;comment);</div><div class="line">    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(info-&gt;type == ED247_SIGNAL_TYPE_NAD){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;#### ED247 NAD Signal\n\</span></div><div class="line"><span class="stringliteral">Name: %s\n\</span></div><div class="line"><span class="stringliteral">ICD: %s\n\</span></div><div class="line"><span class="stringliteral">Unit: %s\n\</span></div><div class="line"><span class="stringliteral">Type: %s\n\</span></div><div class="line"><span class="stringliteral">ByteOffset: %u\n\</span></div><div class="line"><span class="stringliteral">Comment: %s\n&quot;</span>,</div><div class="line">        info-&gt;name,</div><div class="line">        info-&gt;icd,</div><div class="line">        info-&gt;info.nad.unit,</div><div class="line">        <a class="code" href="group__common.html#ga0da47bc91d3ae514596f170b83aea01f">ed247_nad_type_string</a>(info-&gt;info.nad.nad_type),</div><div class="line">        info-&gt;info.nad.byte_offset,</div><div class="line">        info-&gt;comment);</div><div class="line">        uint32_t i = 0;</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Dimensions:&quot;</span>);</div><div class="line">        <span class="keywordflow">for</span>(i = 0;i &lt; info-&gt;info.nad.dimensions_count ; i++){</div><div class="line">            fprintf(stdout,<span class="stringliteral">&quot; %u&quot;</span>,info-&gt;info.nad.dimensions[i]);</div><div class="line">        }</div><div class="line">    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(info-&gt;type == ED247_SIGNAL_TYPE_VNAD){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;#### ED247 VNAD Signal\n\</span></div><div class="line"><span class="stringliteral">Name: %s\n\</span></div><div class="line"><span class="stringliteral">ICD: %s\n\</span></div><div class="line"><span class="stringliteral">Unit: %s\n\</span></div><div class="line"><span class="stringliteral">Type: %s\n\</span></div><div class="line"><span class="stringliteral">MaxLength: %u\n\</span></div><div class="line"><span class="stringliteral">Comment: %s\n&quot;</span>,</div><div class="line">        info-&gt;name,</div><div class="line">        info-&gt;icd,</div><div class="line">        info-&gt;info.vnad.unit,</div><div class="line">        <a class="code" href="group__common.html#ga0da47bc91d3ae514596f170b83aea01f">ed247_nad_type_string</a>(info-&gt;info.vnad.nad_type),</div><div class="line">        info-&gt;info.vnad.max_length,</div><div class="line">        info-&gt;comment);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="example_2"></a>
Example 2: Exchange stream samples (wait frame)</h1>
<p><b>ecic_exchange_stream_wait_frame_send.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- A664 --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">A664_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                &lt;/<span class="keywordtype">A664_Stream</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_stream_wait_frame_send.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;ed247.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_exchange_stream_wait_frame_send.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_MASTER</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_SLAVE</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a>          stream;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>, <a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>, <a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Stream</span></div><div class="line">    status = <a class="code" href="group__stream.html#ga360affab24abac696291952b8fd056f0">ed247_find_streams</a>(context, <span class="stringliteral">&quot;Stream&quot;</span>, &amp;streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams, &amp;stream);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line">    status = <a class="code" href="group__read__write.html#ga0eb3d98c50d6c591590d94ec9edd9c6c">ed247_stream_allocate_sample</a>(stream, &amp;sample, &amp;sample_size);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Write &amp; push samples on the stream</span></div><div class="line">    uint32_t i;</div><div class="line">    <span class="keywordflow">for</span>(i = 0 ; i &lt; 10 ; i++){</div><div class="line">        snprintf((<span class="keywordtype">char</span>*)sample, sample_size, <span class="stringliteral">&quot;Message: %u&quot;</span>, i);</div><div class="line">        <span class="comment">// Push sample and send them if the stack is full. When sent, the internal buffer is released</span></div><div class="line">        status = <a class="code" href="group__read__write.html#ga54589bd6ed53474b8c0b757555c1443a">ed247_stream_push_sample</a>(stream, sample, sample_size, NULL, NULL);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    free(sample);</div><div class="line"></div><div class="line">    sync_wait(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// If the stream still contains samples, send them manually</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#ga39df8ce9b734a64cecf73dbbba6be911">ed247_send_pushed_samples</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS) {</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><b>ecic_exchange_stream_wait_frame_recv.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- A664 --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">A664_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                &lt;/<span class="keywordtype">A664_Stream</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_stream_wait_frame_recv.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;ed247.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_exchange_stream_wait_frame_recv.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_SLAVE</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_MASTER</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams);</div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>, <a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>, <a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// // Mode 0 : Register a callback triggered when new samples are available in a given stream</span></div><div class="line">    <span class="comment">// status = ed247_register_recv_callback(context, &amp;stream_receive_callback);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    sync_send(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Mode 1 : Wait for the first frame to be received</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#gaa5d1e1629995c0ccb1931c393ef608a1">ed247_wait_frame</a>(context, &amp;streams, 30000000);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    <span class="keywordflow">if</span>(process_streams(context, streams)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// // Mode 2 : Wait until the timeout is reached and process all received frame in the mean time</span></div><div class="line">    <span class="comment">// status = ed247_wait_during(context, &amp;streams, 10000000);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// if(process_streams(context, streams)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// status = ed247_stream_list_free(streams);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    <span class="comment">// status = ed247_unregister_recv_callback(context, &amp;stream_receive_callback);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line">    </div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span>(<a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams, &amp;stream) == ED247_STATUS_SUCCESS &amp;&amp; stream != NULL){</div><div class="line">        status = stream_receive(context, stream);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line">        status = <a class="code" href="group__read__write.html#ga8c706ff1340982a7f1434533139d723a">ed247_stream_pop_sample</a>(stream, &amp;sample, &amp;sample_size, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">        <span class="comment">// Process sample</span></div><div class="line">        <span class="comment">// ...</span></div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ED247_STATUS_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line">        status = <a class="code" href="group__read__write.html#ga8c706ff1340982a7f1434533139d723a">ed247_stream_pop_sample</a>(stream, &amp;sample, &amp;sample_size, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(status == ED247_STATUS_FAILURE){</div><div class="line">            fprintf(stderr,<span class="stringliteral">&quot;# ERROR\n&quot;</span>);</div><div class="line">            <span class="keywordflow">return</span> status;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Process sample</span></div><div class="line">        <span class="comment">// ...</span></div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line">    <span class="keywordflow">return</span> status;</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="example_3"></a>
Example 3: Exchange stream samples (wait during)</h1>
<p><b>ecic_exchange_stream_wait_during_send.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- A664 --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">A664_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                &lt;/<span class="keywordtype">A664_Stream</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_stream_wait_during_send.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;ed247.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_exchange_stream_wait_during_send.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_MASTER</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_SLAVE</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a>          stream;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>, <a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>, <a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Stream</span></div><div class="line">    status = <a class="code" href="group__stream.html#ga360affab24abac696291952b8fd056f0">ed247_find_streams</a>(context, <span class="stringliteral">&quot;Stream&quot;</span>, &amp;streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams, &amp;stream);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line">    status = <a class="code" href="group__read__write.html#ga0eb3d98c50d6c591590d94ec9edd9c6c">ed247_stream_allocate_sample</a>(stream, &amp;sample, &amp;sample_size);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Write &amp; push samples on the stream</span></div><div class="line">    uint32_t i;</div><div class="line">    <span class="keywordflow">for</span>(i = 0 ; i &lt; 10 ; i++){</div><div class="line">        snprintf((<span class="keywordtype">char</span>*)sample, sample_size, <span class="stringliteral">&quot;Message: %u&quot;</span>, i);</div><div class="line">        <span class="comment">// Push sample and send them if the stack is full. When sent, the internal buffer is released</span></div><div class="line">        status = <a class="code" href="group__read__write.html#ga54589bd6ed53474b8c0b757555c1443a">ed247_stream_push_sample</a>(stream, sample, sample_size, NULL, NULL);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    free(sample);</div><div class="line"></div><div class="line">    sync_wait(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// If the stream still contains samples, send them manually</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#ga39df8ce9b734a64cecf73dbbba6be911">ed247_send_pushed_samples</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><b>ecic_exchange_stream_wait_during_recv.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- A664 --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">A664_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                &lt;/<span class="keywordtype">A664_Stream</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_stream_wait_during_recv.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;ed247.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_exchange_stream_wait_during_recv.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_SLAVE</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_MASTER</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams);</div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>, <a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>, <a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// // Mode 0 : Register a callback triggered when new samples are available in a given stream</span></div><div class="line">    <span class="comment">// status = ed247_register_recv_callback(context, &amp;stream_receive_callback);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    <span class="comment">// Mode 1 : Wait for the first frame to be received</span></div><div class="line">    <span class="comment">// status = ed247_wait_frame(context, &amp;streams, 30000000);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// if(process_streams(context, streams)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// status = ed247_stream_list_free(streams);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    sync_send(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// // Mode 2 : Wait until the timeout is reached and process all received frame in the mean time</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#ga0b1dd58e03070d62b0ca74e2aee21d3c">ed247_wait_during</a>(context, &amp;streams, 3000000);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    <span class="keywordflow">if</span>(process_streams(context, streams)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    <span class="comment">// status = ed247_unregister_recv_callback(context, &amp;stream_receive_callback);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line">    </div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span>(<a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams, &amp;stream) == ED247_STATUS_SUCCESS &amp;&amp; stream != NULL){</div><div class="line">        status = stream_receive(context, stream);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line">        status = <a class="code" href="group__read__write.html#ga8c706ff1340982a7f1434533139d723a">ed247_stream_pop_sample</a>(stream, &amp;sample, &amp;sample_size, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">        <span class="comment">// Process sample</span></div><div class="line">        <span class="comment">// ...</span></div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ED247_STATUS_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line">        status = <a class="code" href="group__read__write.html#ga8c706ff1340982a7f1434533139d723a">ed247_stream_pop_sample</a>(stream, &amp;sample, &amp;sample_size, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(status == ED247_STATUS_FAILURE){</div><div class="line">            fprintf(stderr,<span class="stringliteral">&quot;# ERROR\n&quot;</span>);</div><div class="line">            <span class="keywordflow">return</span> status;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Process sample</span></div><div class="line">        <span class="comment">// ...</span></div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line">    <span class="keywordflow">return</span> status;</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="example_4"></a>
Example 4: Exchange stream samples (event)</h1>
<p><b>ecic_exchange_stream_event_send.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- A664 --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">A664_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                &lt;/<span class="keywordtype">A664_Stream</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_stream_event_send.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;ed247.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_exchange_stream_event_send.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_MASTER</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_SLAVE</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a>          stream;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>, <a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>, <a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Stream</span></div><div class="line">    status = <a class="code" href="group__stream.html#ga360affab24abac696291952b8fd056f0">ed247_find_streams</a>(context, <span class="stringliteral">&quot;Stream&quot;</span>, &amp;streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams, &amp;stream);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line">    status = <a class="code" href="group__read__write.html#ga0eb3d98c50d6c591590d94ec9edd9c6c">ed247_stream_allocate_sample</a>(stream, &amp;sample, &amp;sample_size);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Write &amp; push samples on the stream</span></div><div class="line">    uint32_t i;</div><div class="line">    <span class="keywordflow">for</span>(i = 0 ; i &lt; 10 ; i++){</div><div class="line">        snprintf((<span class="keywordtype">char</span>*)sample, sample_size, <span class="stringliteral">&quot;Message: %u&quot;</span>, i);</div><div class="line">        <span class="comment">// Push sample and send them if the stack is full. When sent, the internal buffer is released</span></div><div class="line">        status = <a class="code" href="group__read__write.html#ga54589bd6ed53474b8c0b757555c1443a">ed247_stream_push_sample</a>(stream, sample, sample_size, NULL, NULL);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    free(sample);</div><div class="line"></div><div class="line">    sync_wait(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// If the stream still contains samples, send them manually</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#ga39df8ce9b734a64cecf73dbbba6be911">ed247_send_pushed_samples</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><b>ecic_exchange_stream_event_recv.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- A664 --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">A664_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                &lt;/<span class="keywordtype">A664_Stream</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_stream_event_recv.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;ed247.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_exchange_stream_event_recv.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_SLAVE</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_MASTER</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams);</div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> processed = 0;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>, <a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>, <a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// // Mode 0 : Register a callback triggered when new samples are available in a given stream</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#ga926b9b5e9d695f83f7bf94b0894d5b86">ed247_register_recv_callback</a>(context, &amp;stream_receive_callback);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Mode 1 : Wait for the first frame to be received</span></div><div class="line">    <span class="comment">// status = ed247_wait_frame(context, &amp;streams, 30000000);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// if(process_streams(context, streams)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// status = ed247_stream_list_free(streams);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    <span class="comment">// // Mode 2 : Wait until the timeout is reached and process all received frame in the mean time</span></div><div class="line">    <span class="comment">// status = ed247_wait_during(context, &amp;streams, 10000000);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// if(process_streams(context, streams)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// status = ed247_stream_list_free(streams);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    sync_send(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Emulate a sleep function</span></div><div class="line">    <a class="code" href="group__send__recv.html#gaa5d1e1629995c0ccb1931c393ef608a1">ed247_wait_frame</a>(context, &amp;streams, 10000000);</div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#gaf48a493504277d57ac784011f9161921">ed247_unregister_recv_callback</a>(context, &amp;stream_receive_callback);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Check if the event callback has been called</span></div><div class="line">    <span class="keywordflow">if</span>(processed != 1){</div><div class="line">        fprintf(stderr,<span class="stringliteral">&quot;# ED247 DATA NOT PROCESSED !\n&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line">    </div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span>(<a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams, &amp;stream) == ED247_STATUS_SUCCESS &amp;&amp; stream != NULL){</div><div class="line">        status = stream_receive(context, stream);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line">        status = <a class="code" href="group__read__write.html#ga8c706ff1340982a7f1434533139d723a">ed247_stream_pop_sample</a>(stream, &amp;sample, &amp;sample_size, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status) != ED247_STATUS_SUCCESS) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">        <span class="comment">// Process sample</span></div><div class="line">        <span class="comment">// ...</span></div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ED247_STATUS_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * sample;</div><div class="line">    <span class="keywordtype">size_t</span> sample_size;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line"></div><div class="line">        fprintf(stderr,<span class="stringliteral">&quot;# POP SAMPLE\n&quot;</span>);</div><div class="line"></div><div class="line">        status = <a class="code" href="group__read__write.html#ga8c706ff1340982a7f1434533139d723a">ed247_stream_pop_sample</a>(stream, &amp;sample, &amp;sample_size, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(status == ED247_STATUS_FAILURE){</div><div class="line">            fprintf(stderr,<span class="stringliteral">&quot;# ERROR\n&quot;</span>);</div><div class="line">            <span class="keywordflow">return</span> status;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Process sample</span></div><div class="line">        <span class="comment">// ...</span></div><div class="line">        processed = 1;</div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line">    <span class="keywordflow">return</span> status;</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="example_5"></a>
Example 5: Exchange signal samples (wait frame)</h1>
<p><b>ecic_exchange_signal_wait_frame_send.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span> <span class="keyword">Comment</span>=<span class="stringliteral">&quot;Comment&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- DIS --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">DIS_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;Out&quot;</span> <span class="keyword">SampleMaxSizeBytes</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                    &lt;<span class="keywordtype">Signals</span> <span class="keyword">SamplingPeriodUs</span>=<span class="stringliteral">&quot;10000&quot;</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                        &lt;<span class="keywordtype">Signal</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;DIS_Signal&quot;</span> <span class="keyword">ByteOffset</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                    &lt;/<span class="keywordtype">Signals</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                &lt;/<span class="keywordtype">DIS_Stream</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_signal_wait_frame_send.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;ed247.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/examples/ECIC_EXAMPLE_SIGNAL_SEND_RECV_WAIT_FRAME_SEND.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_MASTER</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_SLAVE</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    ed247_status_t              status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>             context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>         streams;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a>              stream;</div><div class="line">    <a class="code" href="structed247__internal__signal__list__t.html">ed247_signal_list_t</a>         signals;</div><div class="line">    <a class="code" href="structed247__internal__signal__t.html">ed247_signal_t</a>              signal;</div><div class="line">    <a class="code" href="structed247__internal__stream__assistant__t.html">ed247_stream_assistant_t</a>    assistant;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout,<span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>,<a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout,<span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>,<a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Stream</span></div><div class="line">    status = <a class="code" href="group__stream.html#ga360affab24abac696291952b8fd056f0">ed247_find_streams</a>(context,<span class="stringliteral">&quot;Stream&quot;</span>,&amp;streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams,&amp;stream);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Assistant</span></div><div class="line">    status = <a class="code" href="group__read__write.html#ga3907463be59d8d3cc80caf0dd06e4af9">ed247_stream_get_assistant</a>(stream, &amp;assistant);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Signal</span></div><div class="line">    status = <a class="code" href="group__signal.html#ga55d1f5c8b1bd10b66f72e72549a3f1cb">ed247_find_stream_signals</a>(stream,<span class="stringliteral">&quot;.*&quot;</span>,&amp;signals);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__signal.html#gaf815bc3fe26275404b9988bde67faf59">ed247_signal_list_next</a>(signals,&amp;signal);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> * signal_sample;</div><div class="line">    <span class="keywordtype">size_t</span> signal_sample_size;</div><div class="line">    status = <a class="code" href="group__read__write.html#gaafb7ed2fd4f7fe7bc231d69a8cd4be50">ed247_signal_allocate_sample</a>(signal, &amp;signal_sample, &amp;signal_sample_size);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Write &amp; push signal samples</span></div><div class="line">    uint32_t i;</div><div class="line">    <span class="keywordflow">for</span>(i = 0 ; i &lt; 10 ; i++){</div><div class="line">        *(uint8_t*)signal_sample = i % 2;</div><div class="line">        <span class="comment">// Update stream sample</span></div><div class="line">        status = <a class="code" href="group__read__write.html#gafc721367e86fe159e638ef0b66ef092e">ed247_stream_assistant_write_signal</a>(assistant, signal, signal_sample, signal_sample_size);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">        status = <a class="code" href="group__read__write.html#gabd1cb477151f3c4fb883e218ecb87988">ed247_stream_assistant_push_sample</a>(assistant, NULL, NULL);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    free(signal_sample);</div><div class="line"></div><div class="line">    sync_wait(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Send them</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#ga39df8ce9b734a64cecf73dbbba6be911">ed247_send_pushed_samples</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    status = <a class="code" href="group__signal.html#ga3249893a97ef7ea717d8d4b12df2249c">ed247_signal_list_free</a>(signals);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p><b>ecic_exchange_signal_wait_frame_recv.xml</b> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">&lt;!--</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">The MIT Licence</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">to deal in the Software without restriction, including without limitation</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">The above copyright notice and this permission notice shall be included</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">in all copies or substantial portions of the Software.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">DEALINGS IN THE SOFTWARE.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">--&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;&lt;<span class="keywordtype">ED247ComponentInstanceConfiguration</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Component&quot;</span> <span class="keyword">ComponentType</span>=<span class="stringliteral">&quot;Virtual&quot;</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span> <span class="keyword">Identifier</span>=<span class="stringliteral">&quot;0&quot;</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="keyword">xsi:noNamespaceSchemaLocation</span>=<span class="stringliteral">&quot;ED247A_ECIC.xsd&quot;</span>&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    &lt;<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">MultiChannel</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Channel0&quot;</span> <span class="keyword">Comment</span>=<span class="stringliteral">&quot;Comment&quot;</span>&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            &lt;<span class="keywordtype">FrameFormat</span> <span class="keyword">StandardRevision</span>=<span class="stringliteral">&quot;A&quot;</span>/&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            &lt;<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                &lt;<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                    &lt;<span class="keywordtype">UDP_Socket</span> <span class="keyword">DstIP</span>=<span class="stringliteral">&quot;127.0.0.1&quot;</span> <span class="keyword">DstPort</span>=<span class="stringliteral">&quot;2589&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                &lt;/<span class="keywordtype">UDP_Sockets</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            &lt;/<span class="keywordtype">ComInterface</span>&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            &lt;<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="comment">&lt;!-- DIS --&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                &lt;<span class="keywordtype">DIS_Stream</span> <span class="keyword">UID</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;Stream&quot;</span> <span class="keyword">Direction</span>=<span class="stringliteral">&quot;In&quot;</span> <span class="keyword">SampleMaxSizeBytes</span>=<span class="stringliteral">&quot;1&quot;</span>&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    &lt;<span class="keywordtype">DataTimestamp</span> <span class="keyword">Enable</span>=<span class="stringliteral">&quot;No&quot;</span> <span class="keyword">SampleDataTimestampOffset</span>=<span class="stringliteral">&quot;No&quot;</span>/&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                    &lt;<span class="keywordtype">Signals</span> <span class="keyword">SamplingPeriodUs</span>=<span class="stringliteral">&quot;10000&quot;</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                        &lt;<span class="keywordtype">Signal</span> <span class="keyword">Name</span>=<span class="stringliteral">&quot;DIS_Signal&quot;</span> <span class="keyword">ByteOffset</span>=<span class="stringliteral">&quot;0&quot;</span>/&gt;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                    &lt;/<span class="keywordtype">Signals</span>&gt;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                &lt;/<span class="keywordtype">DIS_Stream</span>&gt;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            &lt;/<span class="keywordtype">Streams</span>&gt;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        &lt;/<span class="keywordtype">MultiChannel</span>&gt;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    &lt;/<span class="keywordtype">Channels</span>&gt;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;&lt;/<span class="keywordtype">ED247ComponentInstanceConfiguration</span>&gt;</div></div><!-- fragment --><p><b>exchange_signal_wait_frame_recv.cpp</b> </p><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment"> * The MIT Licence</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Copyright (c) 2021 Airbus Operations S.A.S</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * Permission is hereby granted, free of charge, to any person obtaining a</span></div><div class="line"><span class="comment"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span></div><div class="line"><span class="comment"> * to deal in the Software without restriction, including without limitation</span></div><div class="line"><span class="comment"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span></div><div class="line"><span class="comment"> * and/or sell copies of the Software, and to permit persons to whom the</span></div><div class="line"><span class="comment"> * Software is furnished to do so, subject to the following conditions:</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * The above copyright notice and this permission notice shall be included</span></div><div class="line"><span class="comment"> * in all copies or substantial portions of the Software.</span></div><div class="line"><span class="comment">  </span></div><div class="line"><span class="comment"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="line"><span class="comment"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="line"><span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span></div><div class="line"><span class="comment"> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment"> * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment"> * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment"> * OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">                                                                             */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;ed247.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define ECIC_FILEPATH &quot;../config/ecic_exchange_signal_wait_frame_recv.xml&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;sync_entity.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define SYNCER_ID_SRC SYNCER_ID_SLAVE</span></div><div class="line"><span class="preprocessor">#define SYNCER_ID_DST SYNCER_ID_MASTER</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status);</div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams);</div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    ed247_status_t          status;</div><div class="line">    <a class="code" href="structed247__internal__context__t.html">ed247_context_t</a>         context;</div><div class="line">    <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a>     streams;</div><div class="line"></div><div class="line">    sync_init(SYNCER_ID_SRC);</div><div class="line"></div><div class="line">    sync_sync(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Library information</span></div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation name:    %s\n&quot;</span>, <a class="code" href="group__common.html#gadb00e0e45ad86bd56d98eb527b6dedde">ed247_get_implementation_name</a>());</div><div class="line">    fprintf(stdout, <span class="stringliteral">&quot;# Implementation version: %s\n&quot;</span>, <a class="code" href="group__common.html#ga797161571a767e5664e7e0730ef68fcb">ed247_get_implementation_version</a>());</div><div class="line"></div><div class="line">    <span class="comment">// Loading</span></div><div class="line">    <span class="keywordflow">if</span>(argc &lt; 2){</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Missing the first argument, use default ECIC configuration filepath: %s\n&quot;</span>,ECIC_FILEPATH);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(ECIC_FILEPATH, &amp;context);</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">        fprintf(stdout,<span class="stringliteral">&quot;Using provided ECIC configuration filepath: %s\n&quot;</span>,argv[1]);</div><div class="line">        status = <a class="code" href="group__load__unload.html#gaf49ef33dd2d04f9fc5d15c3159ae3acc">ed247_load_file</a>(argv[1], &amp;context);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Mode 0 : Register a callback triggered when new samples are available in a given stream</span></div><div class="line">    <span class="comment">// status = ed247_register_recv_callback(context, &amp;stream_receive_callback);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    sync_send(SYNCER_ID_DST);</div><div class="line"></div><div class="line">    <span class="comment">// Mode 1 : Wait for the first frame to be received</span></div><div class="line">    status = <a class="code" href="group__send__recv.html#gaa5d1e1629995c0ccb1931c393ef608a1">ed247_wait_frame</a>(context, &amp;streams, 10000000);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    <span class="keywordflow">if</span>(process_streams(context, streams)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    status = <a class="code" href="group__stream.html#gae9924ae2410a826448e80290ac604f1e">ed247_stream_list_free</a>(streams);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    <span class="comment">// Mode 2 : Wait until the timeout is reached and process all received frame in the mean time</span></div><div class="line">    <span class="comment">// status = ed247_wait_during(context, &amp;streams, 10000000);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// if(process_streams(context, streams)) return EXIT_FAILURE;</span></div><div class="line">    <span class="comment">// status = ed247_stream_list_free(streams);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    <span class="comment">// Unload</span></div><div class="line">    <span class="comment">// status = ed247_unregister_recv_callback(context, &amp;stream_receive_callback);</span></div><div class="line">    <span class="comment">// if(check_status(context, status)) return EXIT_FAILURE;</span></div><div class="line"></div><div class="line">    status = <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line"></div><div class="line">    sync_stop();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> check_status(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, ed247_status_t status)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(status != ED247_STATUS_SUCCESS){</div><div class="line">      fprintf(stderr, <span class="stringliteral">&quot;ED247 status: %s\n&quot;</span>, <a class="code" href="group__common.html#ga17d99d52dd4f168222422aa2b1999598">ed247_status_string</a>(status));</div><div class="line">      <a class="code" href="group__load__unload.html#ga4d3f79d391f9d7ac65da3456ee865f19">ed247_unload</a>(context);</div><div class="line">      <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }<span class="keywordflow">else</span>{</div><div class="line">      <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> process_streams(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__list__t.html">ed247_stream_list_t</a> streams)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span>(<a class="code" href="group__stream.html#ga01d85b5802d270b8209779242cc84099">ed247_stream_list_next</a>(streams, &amp;stream) == ED247_STATUS_SUCCESS &amp;&amp; stream != NULL){</div><div class="line">        status = stream_receive(context, stream);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <a class="code" href="structed247__internal__signal__t.html">ed247_signal_t</a> signal;</div><div class="line">    <a class="code" href="structed247__internal__signal__list__t.html">ed247_signal_list_t</a> signals;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * signal_sample;</div><div class="line">    <span class="keywordtype">size_t</span> signal_sample_size;</div><div class="line">    <a class="code" href="structed247__internal__stream__assistant__t.html">ed247_stream_assistant_t</a> assistant;</div><div class="line"></div><div class="line">    status = <a class="code" href="group__read__write.html#ga3907463be59d8d3cc80caf0dd06e4af9">ed247_stream_get_assistant</a>(stream, &amp;assistant);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    status = <a class="code" href="group__signal.html#ga55d1f5c8b1bd10b66f72e72549a3f1cb">ed247_find_stream_signals</a>(stream,<span class="stringliteral">&quot;.*&quot;</span>,&amp;signals);</div><div class="line">    <span class="keywordflow">if</span>(check_status(context,status)) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line">        status = <a class="code" href="group__read__write.html#ga758c75af294c4a55562cd0f4784874b4">ed247_stream_assistant_pop_sample</a>(assistant, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span>(<a class="code" href="group__signal.html#gaf815bc3fe26275404b9988bde67faf59">ed247_signal_list_next</a>(signals, &amp;signal) == ED247_STATUS_SUCCESS &amp;&amp; signal != NULL){</div><div class="line">            status = <a class="code" href="group__read__write.html#gac437771deca6b60e6a1f00e8b3b5e9be">ed247_stream_assistant_read_signal</a>(assistant, signal, &amp;signal_sample, &amp;signal_sample_size);</div><div class="line">            <span class="keywordflow">if</span>(check_status(context, status)) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">            <span class="comment">// Process signal sample</span></div><div class="line">            <span class="comment">// ...</span></div><div class="line"></div><div class="line">        }</div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ED247_STATUS_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line">ed247_status_t stream_receive_callback(<a class="code" href="structed247__internal__context__t.html">ed247_context_t</a> context, <a class="code" href="structed247__internal__stream__t.html">ed247_stream_t</a> stream)</div><div class="line">{</div><div class="line">    ed247_status_t status;</div><div class="line">    <a class="code" href="structed247__internal__signal__t.html">ed247_signal_t</a> signal;</div><div class="line">    <a class="code" href="structed247__internal__signal__list__t.html">ed247_signal_list_t</a> signals;</div><div class="line">    <span class="keywordtype">bool</span> empty = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * signal_sample;</div><div class="line">    <span class="keywordtype">size_t</span> signal_sample_size;</div><div class="line">    <a class="code" href="structed247__internal__stream__assistant__t.html">ed247_stream_assistant_t</a> assistant;</div><div class="line"></div><div class="line">    status = <a class="code" href="group__read__write.html#ga3907463be59d8d3cc80caf0dd06e4af9">ed247_stream_get_assistant</a>(stream, &amp;assistant);</div><div class="line">    <span class="keywordflow">if</span>(status == ED247_STATUS_FAILURE) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    status = <a class="code" href="group__signal.html#ga55d1f5c8b1bd10b66f72e72549a3f1cb">ed247_find_stream_signals</a>(stream,<span class="stringliteral">&quot;.*&quot;</span>,&amp;signals);</div><div class="line">    <span class="keywordflow">if</span>(status == ED247_STATUS_FAILURE) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">    <span class="keywordflow">do</span>{</div><div class="line">        status = <a class="code" href="group__read__write.html#ga758c75af294c4a55562cd0f4784874b4">ed247_stream_assistant_pop_sample</a>(assistant, NULL, NULL, NULL, &amp;empty);</div><div class="line">        <span class="keywordflow">if</span>(status == ED247_STATUS_FAILURE) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">        <span class="keywordflow">while</span>(<a class="code" href="group__signal.html#gaf815bc3fe26275404b9988bde67faf59">ed247_signal_list_next</a>(signals, &amp;signal) == ED247_STATUS_SUCCESS &amp;&amp; signal != NULL){</div><div class="line">            status = <a class="code" href="group__read__write.html#gac437771deca6b60e6a1f00e8b3b5e9be">ed247_stream_assistant_read_signal</a>(assistant, signal, &amp;signal_sample, &amp;signal_sample_size);</div><div class="line">            <span class="keywordflow">if</span>(status == ED247_STATUS_FAILURE) <span class="keywordflow">return</span> status;</div><div class="line"></div><div class="line">            <span class="comment">// Process signal sample</span></div><div class="line">            <span class="comment">// ...</span></div><div class="line"></div><div class="line">        }</div><div class="line"></div><div class="line">    }<span class="keywordflow">while</span>(!empty);</div><div class="line">    <span class="keywordflow">return</span> status;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
